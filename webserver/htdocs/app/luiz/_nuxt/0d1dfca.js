(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{514:function(e,t,n){var content=n(562);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(23).default)("1a44df04",content,!0,{sourceMap:!1})},561:function(e,t,n){"use strict";n(514)},562:function(e,t,n){var o=n(22)(!1);o.push([e.i,"[data-v-51af9afb] .marcarguias .v-data-footer__select .v-select{margin:5px 0 5px 34px}[data-v-51af9afb] tr.v-data-table__selected{background:#bcd9e9 !important}[data-v-51af9afb] .v-data-table th[role=columnheader]{white-space:nowrap}[data-v-51af9afb] .v-tabs-bar{padding-bottom:5px;padding-left:5px}[data-v-51af9afb] .dstudies{max-height:200px;overflow-y:auto}[data-v-51af9afb] .dserie{max-height:200px;overflow-y:auto}[data-v-51af9afb] .dimage{max-height:300px;overflow-y:auto}",""]),e.exports=o},597:function(e,t,n){"use strict";n.r(t);var o=n(168),r=n(113),c=n(135),l=n(600),d=n(502),m=n(506),v=n(596),f=n(139),I=n(326),h=n(501),D=n(594),S=n(601),y=n(599),x=n(585),k=n(488),w=n(38),_=(n(96),n(26),n(59),n(4),n(12),function(e){return"".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port)}),Y={name:"DicomViewer",data:function(e){return{mainImage:null,keycorn:0,thumbsImg:[],tab:null,params:[],loadingComplete:!1,dialogWait:!1,paciente:{pacid:"",pacnome:""},estudo:{df:e.$moment().format("YYYY-MM-DD"),di:e.$moment().subtract("5","days").format("YYYY-MM-DD"),filtra:1},body:document.querySelector("body"),modelStudy:[],studies:[],headersStudies:[{text:"Study Date",align:"start",sortable:!1,value:"StudyDate"},{text:"Pat Name",value:"PatientName"},{text:"Pat ID",value:"PatientID"},{text:"Study Inst UID",value:"StudyInstanceUID"},{text:"Birth Date",value:"PatientBirthDate"}],modelSerie:[],series:[],headersSeries:[{text:"Pat ID",value:"PatientID"},{text:"Serie Date",value:"SeriesDate"},{text:"Serie Time",value:"SeriesTime"},{text:"Series Description",value:"SeriesDescription"},{text:"Serie Inst UID",value:"SeriesInstanceUID"}],modelImage:[],images:[],headersImage:[{text:"Inst. Number",value:"InstanceNumber"},{text:"SOP Inst UID",value:"SOPInstanceUID"},{text:"Nr Frames",value:"NumberOfFrames",align:"center"},{text:"Series UID",value:"SeriesInstanceUID"}]}},methods:{resizeCorn:function(){this.keycorn++},getSrcImage:function(e){var t="".concat(_(this.$config.baseURL),"/api/dicom/"),n=e.StudyInstanceUID,o=e.SeriesInstanceUID,r=e.SOPInstanceUID,c="requestType=".concat("WADO","&studyUID=").concat(n,"&seriesUID=").concat(o,"&objectUID=").concat(r,"&contentType=").concat("image/jpeg","&rows=").concat("128","&columns=").concat("128");return"".concat(t,"wadouri?").concat(c)},rowClickStudy:function(e,t){t.select(!0);try{this.modelSerie=[],this.series=[],this.images=[],this.modelImage=[],this.searchSeries(e)}catch(e){console.log(e)}},rowClickSerie:function(e,t){t.select(!0),this.images=[],this.modelImage=[];try{this.searchImages(e)}catch(e){console.log(e)}},getSrcMainImage:function(e){var t="".concat(_(this.$config.baseURL),"/api/dicom/"),n=e.StudyInstanceUID,o=e.SeriesInstanceUID,r=e.SOPInstanceUID,c="requestType=".concat("WADO","&studyUID=").concat(n,"&seriesUID=").concat(o,"&objectUID=").concat(r,"&contentType=").concat("application/dicom");return"".concat(t,"wadouri?").concat(c)},loadCornerstone:function(e){var t=this;this.mainImage=this.getSrcMainImage(e),this.thumbsImg=this.images.map((function(e){return e.thumb=t.getSrcImage(e),e.mainImage=t.getSrcMainImage(e),e})),this.tab=1},rowClickImage:function(e,t){this.loadingComplete=!1,t&&t.select(!0)},searchStudies:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){var n,o,r,c,l,d,m,v,f,I,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dialogWait=!0,e.modelStudy=[],e.studies=[],e.modelSerie=[],e.series=[],e.modelImage=[],e.images=[],t.prev=7,l="",d=(null===(n=e.paciente)||void 0===n?void 0:n.pacnome)||(null===(o=e.paciente)||void 0===o?void 0:o.pacid),m=e.estudo.di&&1==e.estudo.filtra?e.$moment(e.estudo.di).format("YYYYMMDD"):"",v=e.estudo.df&&1==e.estudo.filtra?e.$moment(e.estudo.df).format("YYYYMMDD"):"",m&&v&&(l="".concat(m,"-").concat(v)),!e.paciente.pacnome){t.next=19;break}return t.next=16,e.$DicomService.dicomQIDOStudies({PatientName:e.paciente.pacnome,StudyDate:l});case 16:c=t.sent,t.next=23;break;case 19:if(!e.paciente.pacid){t.next=23;break}return t.next=22,e.$DicomService.dicomQIDOStudies({PatientID:e.paciente.pacid,StudyDate:l});case 22:c=t.sent;case 23:if(d){t.next=26;break}return e.$dialog.notify.info("Please, select the options.",{position:"top-right",timeout:3e3}),t.abrupt("return");case 26:if(204!=(null===(r=c)||void 0===r?void 0:r.status)){t.next=29;break}return e.$dialog.notify.warning("Records no found.",{position:"top-right",timeout:3e3}),t.abrupt("return");case 29:f=c.data,e.studies=[],f.forEach((function(t){var n,o,r,c,l,d,m,v,f,I,h={StudyDate:null===(n=t["00080020"])||void 0===n||null===(o=n.Value)||void 0===o?void 0:o[0],PatientName:null===(r=t["00100010"])||void 0===r||null===(c=r.Value)||void 0===c?void 0:c[0],PatientID:null===(l=t["00100020"])||void 0===l||null===(d=l.Value)||void 0===d?void 0:d[0],StudyInstanceUID:null===(m=t["0020000D"])||void 0===m||null===(v=m.Value)||void 0===v?void 0:v[0],PatientBirthDate:null===(f=t["00100030"])||void 0===f||null===(I=f.Value)||void 0===I?void 0:I[0]};e.studies.push(h)})),0==e.studies.length&&e.$dialog.notify.info("Records no found.",{position:"top-right",timeout:3e3}),t.next=40;break;case 35:return t.prev=35,t.t0=t.catch(7),console.log(t.t0),t.next=40,e.$dialog.error({text:(null===t.t0||void 0===t.t0||null===(I=t.t0.response)||void 0===I||null===(h=I.data)||void 0===h?void 0:h.message)||"Image server not accesible!",title:"Erro",persistent:!1,actions:["Fechar"]});case 40:return t.prev=40,e.dialogWait=!1,t.finish(40);case 43:case"end":return t.stop()}}),t,null,[[7,35,40,43]])})))()},searchSeries:function(e){var t=this;return Object(w.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.dialogWait=!0,t.modelSerie=[],t.series=[],t.modelImage=[],t.images=[],n.prev=5,n.next=8,t.$DicomService.dicomQIDOSeries({StudyInstanceUID:e.StudyInstanceUID,query:{SeriesDate:"",SeriesTime:"",PatientID:""}});case 8:if(204!=(null==(o=n.sent)?void 0:o.status)){n.next=12;break}return t.$dialog.notify.warning("Records no found.",{position:"top-right",timeout:3e3}),n.abrupt("return");case 12:r=o.data,t.series=[],r.forEach((function(e){var n,o,r,c,l,d,m,v,f,I,h,D,S={SeriesDate:null===(n=e["00080021"])||void 0===n||null===(o=n.Value)||void 0===o?void 0:o[0],SeriesTime:null===(r=e["00080031"])||void 0===r||null===(c=r.Value)||void 0===c?void 0:c[0],PatientID:null===(l=e["00100020"])||void 0===l||null===(d=l.Value)||void 0===d?void 0:d[0],SeriesDescription:null===(m=e["0008103E"])||void 0===m||null===(v=m.Value)||void 0===v?void 0:v[0],StudyInstanceUID:null===(f=e["0020000D"])||void 0===f||null===(I=f.Value)||void 0===I?void 0:I[0],SeriesInstanceUID:null===(h=e["0020000E"])||void 0===h||null===(D=h.Value)||void 0===D?void 0:D[0]};t.series.push(S)})),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(5),console.log(n.t0);case 20:return n.prev=20,t.dialogWait=!1,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[5,17,20,23]])})))()},searchImages:function(e){var t=this;return Object(w.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.dialogWait=!0,n.prev=1,n.next=4,t.$DicomService.dicomQIDOImages({StudyInstanceUID:e.StudyInstanceUID,SeriesInstanceUID:e.SeriesInstanceUID,query:{}});case 4:if(204!=(null==(o=n.sent)?void 0:o.status)){n.next=8;break}return t.$dialog.notify.warning("Records no found.",{position:"top-right",timeout:3e3}),n.abrupt("return");case 8:r=o.data,t.images=[],r.forEach((function(e){var n,o,r,c,l,d,m,v,f,I,h={InstanceNumber:null===(n=e["00200013"])||void 0===n||null===(o=n.Value)||void 0===o?void 0:o[0],SOPInstanceUID:null===(r=e["00080018"])||void 0===r||null===(c=r.Value)||void 0===c?void 0:c[0],SeriesInstanceUID:null===(l=e["0020000E"])||void 0===l||null===(d=l.Value)||void 0===d?void 0:d[0],StudyInstanceUID:null===(m=e["0020000D"])||void 0===m||null===(v=m.Value)||void 0===v?void 0:v[0],NumberOfFrames:(null===(f=e["00280008"])||void 0===f||null===(I=f.Value)||void 0===I?void 0:I[0])||"-"};t.images.push(h)})),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0);case 16:return n.prev=16,t.dialogWait=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})))()}}},U=(n(561),n(88)),component=Object(U.a)(Y,(function(){var e=this,t=e._self._c;return t(m.a,{attrs:{fluid:""}},[t("lazy-wait-dialog",{attrs:{"d-wait":e.dialogWait}}),e._v(" "),t(y.a,{attrs:{"background-color":"primary"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(D.a,[e._v("Search")]),e._v(" "),t(D.a,{on:{click:function(t){return t.stopPropagation(),e.resizeCorn()}}},[e._v("Corn ")])],1),e._v(" "),t(x.a,{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(S.a,[t(r.a,[t(c.b,{staticClass:"mt-2"},[t(h.a,[t(d.a,{attrs:{sm:"9"}},[t(h.a,[t(d.a,{attrs:{cols:"12",sm:"5"}},[t(k.a,{attrs:{label:"Range from",type:"date",max:"2999-12-31","hide-details":"auto",clearable:""},model:{value:e.estudo.di,callback:function(t){e.$set(e.estudo,"di",t)},expression:"estudo.di"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"5"}},[t(k.a,{attrs:{label:"to",type:"date",max:"2999-12-31","hide-details":"auto",clearable:""},model:{value:e.estudo.df,callback:function(t){e.$set(e.estudo,"df",t)},expression:"estudo.df"}})],1),e._v(" "),t(l.a,{attrs:{label:"Filter","false-value":0,"true-value":1,"hide-details":""},model:{value:e.estudo.filtra,callback:function(t){e.$set(e.estudo,"filtra",t)},expression:"estudo.filtra"}})],1),e._v(" "),t(h.a,[t(d.a,{attrs:{cols:"12",sm:"4"}},[t(k.a,{attrs:{label:"Patient Id","hide-details":"auto",clearable:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchStudies.apply(null,arguments)},input:function(t){e.paciente.pacnome=""}},model:{value:e.paciente.pacid,callback:function(t){e.$set(e.paciente,"pacid",t)},expression:"paciente.pacid"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"8"}},[t(k.a,{attrs:{label:"Patient Name","hide-details":"auto",clearable:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchStudies.apply(null,arguments)},input:function(t){e.paciente.pacid=""}},model:{value:e.paciente.pacnome,callback:function(t){e.$set(e.paciente,"pacnome",t)},expression:"paciente.pacnome"}})],1)],1)],1),e._v(" "),t(d.a,{staticClass:"d-flex justify-center align-center",attrs:{sm:"3"}},[t(o.a,{attrs:{color:"info",title:"Buscar","hide-details":"auto"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.searchStudies.apply(null,arguments)}}},[t(f.a,[e._v("mdi-magnify")]),e._v("Run\n              ")],1)],1)],1)],1),e._v(" "),t(c.b,[t(c.c,{staticClass:"d-flex indigo white--text py-1 justify-space-between mb-4"},[t(d.a,{staticClass:"py-0"},[e._v("Studies")])],1),e._v(" "),t(h.a,[t(d.a,{attrs:{cols:"12"}},[t(v.a,{staticClass:"elevation-1 marcarguias dstudies",attrs:{"single-select":"",dense:"",headers:e.headersStudies,items:e.studies,"item-key":"StudyInstanceUID","disable-pagination":"","hide-default-footer":""},on:{"click:row":e.rowClickStudy},scopedSlots:e._u([{key:"item.StudyDate",fn:function(t){var n=t.item;return[e._v("\n                  "+e._s(n.StudyDate?e.$moment(n.StudyDate,"YYYYMMDD").format("DD-MM-YYYY"):"")+"\n                ")]}},{key:"item.PatientBirthDate",fn:function(t){var n=t.item;return[e._v("\n                  "+e._s(n.PatientBirthDate?e.$moment(n.PatientBirthDate,"YYYYMMDD").format("DD-MM-YYYY"):"")+"\n                ")]}}],null,!0),model:{value:e.modelStudy,callback:function(t){e.modelStudy=t},expression:"modelStudy"}})],1)],1),e._v(" "),t(c.c,{staticClass:"d-flex indigo white--text py-1 justify-space-between mt-4 mb-4"},[t(d.a,{staticClass:"py-0"},[e._v("Series")])],1),e._v(" "),t(h.a,[t(d.a,{attrs:{cols:"12"}},[t(v.a,{staticClass:"elevation-1 marcarguias dseries",attrs:{"single-select":"",dense:"",headers:e.headersSeries,items:e.series,"disable-pagination":"","hide-default-footer":"","item-key":"SeriesInstanceUID"},on:{"click:row":e.rowClickSerie},scopedSlots:e._u([{key:"item.SeriesTime",fn:function(t){var n=t.item;return[e._v("\n                  "+e._s(n.SeriesTime?e.$moment({}).seconds(n.SeriesTime).format("HH:mm:ss"):"")+"\n                ")]}},{key:"item.SeriesDate",fn:function(t){var n=t.item;return[e._v("\n                  "+e._s(n.SeriesDate?e.$moment(n.SeriesDate,"YYYYMMDD").format("DD-MM-YYYY"):"")+"\n                ")]}}],null,!0),model:{value:e.modelSerie,callback:function(t){e.modelSerie=t},expression:"modelSerie"}})],1)],1),e._v(" "),t(c.c,{staticClass:"d-flex indigo white--text py-1 justify-space-between mt-4 mb-4"},[t(d.a,{staticClass:"py-0"},[e._v("Images")])],1),e._v(" "),t(h.a,[t(d.a,{attrs:{cols:"12"}},[t(v.a,{staticClass:"elevation-1 marcarguias dimage",attrs:{"single-select":"",dense:"",headers:e.headersImage,items:e.images,"item-key":"InstanceNumber","disable-pagination":"","hide-default-footer":""},on:{"click:row":e.rowClickImage},model:{value:e.modelImage,callback:function(t){e.modelImage=t},expression:"modelImage"}})],1)],1),e._v(" "),t(h.a,{attrs:{justify:"space-around"}},e._l(e.images,(function(n){return t(d.a,{key:n.SOPInstanceUID,attrs:{cols:"12",sm:"3",md:"2",lg:"2"}},[t(r.a,{staticClass:"mx-auto my-2 pa-2",attrs:{outlined:"",elevation:"3"}},[t("div",{staticClass:"text-h7 mb-1"},[t("span",[t("strong",[e._v(e._s(n.InstanceNumber))])])]),e._v(" "),t("a",{attrs:{href:"javascript:void(null)"},on:{click:function(t){return t.stopPropagation(),e.loadCornerstone(n)}}},[t(I.a,{attrs:{src:e.getSrcImage(n),"aspect-ratio":"1.7"}})],1)])],1)})),1)],1)],1)],1),e._v(" "),t(S.a,{attrs:{eager:""}},[t("viewer-cornestone",{key:e.keycorn,attrs:{"main-image":e.mainImage,"thumbs-images":e.thumbsImg}})],1)],1)],1)}),[],!1,null,"51af9afb",null);t.default=component.exports;installComponents(component,{ViewerCornestone:n(584).default})}}]);